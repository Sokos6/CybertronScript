{"ast":null,"code":"import _regeneratorRuntime from \"/Users/sokos6/Downloads/money-heist-episode-picker-react-and-typescript-web-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sokos6/Downloads/money-heist-episode-picker-react-and-typescript-web-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n//Added IState,\nexport var fetchDataAction = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n    var URL, data, dataJSON;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            URL = 'https://api.tvmaze.com/singlesearch/shows?q=la-casa-de-papel&embed=episodes';\n            _context.next = 3;\n            return fetch(URL);\n\n          case 3:\n            data = _context.sent;\n            _context.next = 6;\n            return data.json();\n\n          case 6:\n            dataJSON = _context.sent;\n            return _context.abrupt(\"return\", dispatch({\n              type: 'FETCH_DATA',\n              payload: dataJSON._embedded.episodes\n            }));\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function fetchDataAction(_x) {\n    return _ref.apply(this, arguments);\n  };\n}(); //Add IState withits type\n\nexport var toggleFavAction = function toggleFavAction(state, dispatch, episode) {\n  //const episodeInFav = state.favourites.includes(episode)\n  var episodeInFav = state.favourites.includes(episode);\n  var dispatchObj = {\n    type: 'ADD_FAV',\n    payload: episode\n  }; //add an if statement\n\n  if (episodeInFav) {\n    var favWithoutEpisode = state.favourites.filter(function (fav) {\n      return fav.id !== episode.id;\n    });\n    dispatchObj = {\n      type: 'REMOVE_FAV',\n      payload: favWithoutEpisode\n    };\n  }\n\n  return dispatch(dispatchObj);\n};","map":{"version":3,"sources":["/Users/sokos6/Downloads/money-heist-episode-picker-react-and-typescript-web-app/src/Actions.ts"],"names":["fetchDataAction","dispatch","URL","fetch","data","json","dataJSON","type","payload","_embedded","episodes","toggleFavAction","state","episode","episodeInFav","favourites","includes","dispatchObj","favWithoutEpisode","filter","fav","id"],"mappings":";;AAAA;AAGA,OAAO,IAAMA,eAAe;AAAA,sEAAG,iBAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACvBC,YAAAA,GADuB,GAE3B,6EAF2B;AAAA;AAAA,mBAIVC,KAAK,CAACD,GAAD,CAJK;;AAAA;AAIvBE,YAAAA,IAJuB;AAAA;AAAA,mBAKNA,IAAI,CAACC,IAAL,EALM;;AAAA;AAKvBC,YAAAA,QALuB;AAAA,6CAMtBL,QAAQ,CAAC;AACdM,cAAAA,IAAI,EAAE,YADQ;AAEdC,cAAAA,OAAO,EAAEF,QAAQ,CAACG,SAAT,CAAmBC;AAFd,aAAD,CANc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAfV,eAAe;AAAA;AAAA;AAAA,GAArB,C,CAYP;;AACA,OAAO,IAAMW,eAAe,GAAG,SAAlBA,eAAkB,CAC7BC,KAD6B,EAE7BX,QAF6B,EAG7BY,OAH6B,EAIjB;AACZ;AACA,MAAMC,YAAY,GAAGF,KAAK,CAACG,UAAN,CAAiBC,QAAjB,CAA0BH,OAA1B,CAArB;AACA,MAAII,WAAW,GAAG;AAChBV,IAAAA,IAAI,EAAE,SADU;AAEhBC,IAAAA,OAAO,EAAEK;AAFO,GAAlB,CAHY,CAOZ;;AACA,MAAIC,YAAJ,EAAkB;AAChB,QAAMI,iBAAiB,GAAGN,KAAK,CAACG,UAAN,CAAiBI,MAAjB,CACxB,UAACC,GAAD;AAAA,aAAmBA,GAAG,CAACC,EAAJ,KAAWR,OAAO,CAACQ,EAAtC;AAAA,KADwB,CAA1B;AAGAJ,IAAAA,WAAW,GAAG;AACZV,MAAAA,IAAI,EAAE,YADM;AAEZC,MAAAA,OAAO,EAAEU;AAFG,KAAd;AAID;;AAED,SAAOjB,QAAQ,CAACgB,WAAD,CAAf;AACD,CAvBM","sourcesContent":["//Added IState,\r\nimport { IAction, IEpisode, IState, Dispatch } from './types/interfaces';\r\n\r\nexport const fetchDataAction = async (dispatch: Dispatch) => {\r\n  const URL =\r\n    'https://api.tvmaze.com/singlesearch/shows?q=la-casa-de-papel&embed=episodes';\r\n\r\n  const data = await fetch(URL);\r\n  const dataJSON = await data.json();\r\n  return dispatch({\r\n    type: 'FETCH_DATA',\r\n    payload: dataJSON._embedded.episodes,\r\n  });\r\n};\r\n\r\n//Add IState withits type\r\nexport const toggleFavAction = (\r\n  state: IState,\r\n  dispatch: any,\r\n  episode: IEpisode | any\r\n): IAction => {\r\n  //const episodeInFav = state.favourites.includes(episode)\r\n  const episodeInFav = state.favourites.includes(episode);\r\n  let dispatchObj = {\r\n    type: 'ADD_FAV',\r\n    payload: episode,\r\n  };\r\n  //add an if statement\r\n  if (episodeInFav) {\r\n    const favWithoutEpisode = state.favourites.filter(\r\n      (fav: IEpisode) => fav.id !== episode.id\r\n    );\r\n    dispatchObj = {\r\n      type: 'REMOVE_FAV',\r\n      payload: favWithoutEpisode,\r\n    };\r\n  }\r\n\r\n  return dispatch(dispatchObj);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}